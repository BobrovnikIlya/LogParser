# Log Parser — Анализатор логов прокси-сервера
## О приложении
**Log Parser** — это веб-приложение для анализа больших файлов логов прокси-серверов. Оно решает проблему неудобной работы с многогигабайтными текстовыми файлами, предоставляя удобный веб-интерфейс с фильтрацией, статистикой и графиками.

### Возможности:

- Загрузка лог-файлов в PostgreSQL с отображением прогресса

- Фильтрация по дате, IP, пользователю, HTTP-статусу, типу действия

- Просмотр статистики: запросы, ошибки, уникальные IP, трафик

- Визуализация распределения запросов по часам и HTTP-статусам

- Топ популярных URL и активных пользователей

- Экспорт данных в CSV и JSON

### Технологии
- **Бэкенд:** Java 17, Spring Boot 3.2 (Web, Data JPA, JDBC, Cache), Maven

- **База данных:** PostgreSQL 15, HikariCP

- **Кэширование:** Caffeine

- **Фронтенд:** Vanilla JavaScript, HTML5/CSS3, Chart.js

- **Инфраструктура:** Docker, Docker Compose

### Оптимизация производительности
- **Парсинг:** потоковое чтение 4 МБ буфером, временные unlogged таблицы, массовая вставка COPY (быстрее INSERT в сотни раз)

- **Индексация:** автоматическое создание конкурентных индексов после загрузки

- **Кэширование:** Caffeine для результатов фильтрации (TTL 5 мин) и дефолтных запросов (TTL 30 мин)

- **Предрасчёт статистики:** агрегированные данные сохраняются после парсинга

- **Асинхронность:** загрузка в отдельном потоке, возможность отмены операций

- **Оптимизация БД:** временное отключение синхронного коммита при загрузке

## Установка через Docker
### Установите Docker и Docker Compose
- Windows/Mac: скачайте Docker Desktop
- Linux: используйте пакетный менеджер (например, sudo apt install docker.io docker-compose)

Проверьте установку:
```
docker --version
docker-compose --version
```

### Скачайте проект
```
git clone https://github.com/BobrovnikIlya/LogParser.git
cd LogParser
```
### Запустите приложение
В терминале, находясь в папке с проектом, выполните:
```
docker-compose up -d
```
Эта команда: 

- Скачает образы PostgreSQL и Adminer (если их нет)

- Соберёт образ вашего приложения из Dockerfile

- Запустит все контейнеры в фоновом режиме

>Процесс сборки может занять несколько минут при первом запуске.

### Откройте приложение в браузере
После успешного запуска откройте браузер и перейдите по адресу:

```
http://localhost:8080
```

## Инструкция по работе с приложением
### Подготовка файлов с логами
В папке ````logs```` проекта уже есть тестовый файл ````notes.txt```` — это пример, созданный для демонстрации работы приложения. Он весит всего несколько килобайт и содержит лишь тысячи записей.

> Реальные лог-файлы, с которыми предназначено работать приложение:
> - Имеют размер от 7 ГБ и более
> - Содержат свыше 60 миллионов записей

### Загрузка данных
1. В поле **«Путь к файлу»** укажите путь внутри контейнера, например:
    ````
    /app/logs/access.log
    ````
    или оставьте ````/app/logs/notes.txt```` для теста.


2. Нажмите **«Проверить файл»** — если файл найден, кнопка станет активной.


3. Нажмите **«Начать парсинг»** — запустится процесс загрузки. 

    Отобразится:
   - Текущий этап (подсчёт строк, парсинг, финализация, индексация, статистика)

   - Прогресс в процентах

   - Оценка оставшегося времени

4. При необходимости процесс можно **отменить** кнопкой **«✖»**.

### Работа с данными
- **Фильтрация:** используйте поля над таблицей. Фильтры применяются автоматически после ввода.

- **Сброс фильтров:** кнопка «Очистить фильтры».

- **Пагинация:** навигация по страницам под таблицей.

- **Сортировка:** клик по заголовку столбца.

### Просмотр статистики и графиков
- **Карточки статистики** показывают общее количество запросов, ошибок, уникальных IP, среднее время ответа и объём трафика.

- **Круговая диаграмма** отображает распределение HTTP-статусов.

- **Точечная диаграмма** показывает активность по часам.

### Топы и экспорт
- Кнопка **«Топ URL»** — показывает 100 самых популярных URL с учётом текущих фильтров.

- Кнопка **«Топ пользователей»** — показывает 10 самых активных пользователей.

- Кнопка **«Экспорт»** — выгружает текущую страницу в JSON или CSV.
